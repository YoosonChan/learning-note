# 正则表达式
> https://www.runoob.com/js/js-regexp.html    
> https://www.runoob.com/jsref/jsref-obj-regexp.html

---

# 目录
- [JavaScript正则表达式](#JavaScript正则表达式)
- [JavaScript-RegExp对象](#JavaScript-RegExp对象)

---

# JavaScript正则表达式
正则表达式（英语：```Regular Expression```，在代码中常简写为```regex```、```regexp```或```RE```）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式。

搜索模式可用于文本搜索和文本替换。

## 什么是正则表达式？
正则表达式是由一个字符序列形成的搜索模式。

当你在文本中搜索数据时，你可以用搜索模式来描述你要查询的内容。

正则表达式可以是一个简单的字符，或一个更复杂的模式。

正则表达式可用于所有文本搜索和文本替换的操作。

## 语法
```js
/正则表达式主体/修饰符(可选)
```
其中修饰符是可选的。

实例：
```js
var patt = /runoob/i
```
实例解析：
- ```/runoob/i```  是一个正则表达式。
- ```runoob```  是一个正则表达式主体 (用于检索)。
- ```i```  是一个修饰符 (搜索不区分大小写)。

## 使用字符串方法
在 ```JavaScript``` 中，正则表达式通常用于两个字符串方法 : **```search()```** 和 **```replace()```**。
- **```search()```方法**  用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。
- **```replace()```方法**  用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。

### ```search()``` 方法使用正则表达式
**实例**    
使用正则表达式搜索 "```Runoob```" 字符串，且不区分大小写：
```js
var str = "Visit Runoob!"; 
var n = str.search(/Runoob/i);
```
输出结果为：
```js
6
```

### ```search()``` 方法使用字符串
```search``` 方法可使用字符串作为参数。字符串参数会转换为正则表达式：

**实例**    
检索字符串中 "```Runoob```" 的子串：
```js
var str = "Visit Runoob!"; 
var n = str.search("Runoob");
```

### ```replace()``` 方法使用正则表达式
**实例**    
使用正则表达式且不区分大小写将字符串中的 ```Microsoft``` 替换为 ```Runoob``` :
```js
var str = document.getElementById("demo").innerHTML; 
var txt = str.replace(/microsoft/i,"Runoob");
```
结果输出为:
```js
Visit Runoob!
```

### ```replace()``` 方法使用字符串
```replace()``` 方法将接收字符串作为参数：
```js
var str = document.getElementById("demo").innerHTML; 
var txt = str.replace("Microsoft","Runoob");
```

> **注意**    
正则表达式参数可用在以上方法中 (替代字符串参数)。   
正则表达式使得搜索功能更加强大(如实例中不区分大小写)。

## 正则表达式修饰符
**修饰符** 可以在全局搜索中不区分大小写:

| 修饰符 | 描述 |
|-|-|
| ```i``` | 执行对大小写不敏感的匹配。 |
| ```g``` | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。 |
| ```m``` | 执行多行匹配。 |

## 正则表达式模式
### 方括号用于查找某个范围内的字符：
| 表达式 | 描述 |
|-|-|
| ```[abc]``` | 查找方括号之间的任何字符。 |
| ```[0-9]``` | 查找任何从 0 至 9 的数字。 |
| ```(x|y)``` | 查找任何以 | 分隔的选项。 |

### 元字符是拥有特殊含义的字符：
| 元字符 | 描述 |
|-|-|
| ```\d``` | 查找数字。 |
| ```\s``` | 查找空白字符。 |
| ```\b``` | 匹配单词边界。 |
| ```\uxxxx``` | 查找以十六进制数 ```xxxx``` 规定的 ```Unicode``` 字符。 |
### 量词:
| 量词 | 描述 |
|-|-|
| ```n+``` | 匹配任何包含至少一个 ```n``` 的字符串。 |
| ```n*``` | 匹配任何包含零个或多个 ```n``` 的字符串。 |
| ```n?``` | 匹配任何包含零个或一个 ```n``` 的字符串。 |

## 使用 ```RegExp``` 对象
在 ```JavaScript``` 中，```RegExp``` 对象是一个预定义了属性和方法的正则表达式对象。

## 使用 ```test()```
```test()``` 方法是一个正则表达式方法。

```test()``` 方法用于检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文本，则返回 ```true```，否则返回 ```false```。

以下实例用于搜索字符串中的字符 "```e```"：

**实例**
```js
var patt = /e/;
patt.test("The best things in life are free!");
```
字符串中含有 "```e```"，所以该实例输出为：
```js
true
```
你可以不用设置正则表达式的变量，以上两行代码可以合并为一行：
```js
/e/.test("The best things in life are free!")
```
## 使用 ```exec()```
```exec()``` 方法是一个正则表达式方法。

```exec()``` 方法用于检索字符串中的正则表达式的匹配。

该函数返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 ```null```。

以下实例用于搜索字符串中的字母 "```e```":

**实例**
```js
/e/.exec("The best things in life are free!");
```
字符串中含有 "```e```"，所以该实例输出为:
```js
e
```

------------------------------------

# JavaScript-RegExp对象
## RegExp 对象
正则表达式是描述字符模式的对象。

正则表达式用于对字符串模式匹配及检索替换，是对字符串执行模式匹配的强大工具。

## 语法
```js
var patt=new RegExp(pattern,modifiers);
// 或者更简单的方式:
var patt=/pattern/modifiers;
```
- **```pattern```（模式）** 描述了表达式的模式
- **```modifiers```(修饰符)** 用于指定全局匹配、区分大小写的匹配和多行匹配

注意：当使用构造函数创造正则对象时，需要常规的字符转义规则（在前面加反斜杠 ```\```）。比如，以下是等价的：
```js
var re = new RegExp("\\w+");
var re = /\w+/;
```

## 修饰符
修饰符用于执行区分大小写和全局匹配:

| 修饰符 | 描述 |
|-|-|
| i | 执行对大小写不敏感的匹配。 |
| g | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。 |
| m | 执行多行匹配。 |

## 方括号
方括号用于查找某个范围内的字符：

| 表达式 | 描述 |
|-|-|
| ```[abc]``` | 查找方括号之间的任何字符。 |
| ```[^abc]``` | 查找任何不在方括号之间的字符。 |
| ```[0-9]``` | 查找任何从 0 至 9 的数字。 |
| ```[a-z]``` | 查找任何从小写 a 到小写 z 的字符。 |
| ```[A-Z]``` | 查找任何从大写 A 到大写 Z 的字符。 |
| ```[A-z]``` | 查找任何从大写 A 到小写 z 的字符。 |
| ```[adgk]``` | 查找给定集合内的任何字符。 |
| ```[^adgk]``` | 查找给定集合外的任何字符。 |
| ```(red|blue|green)``` | 查找任何指定的选项。 |

## 元字符
元字符（```Metacharacter```）是拥有特殊含义的字符：

| 元字符 | 描述 |
|-|-|
| . | 查找单个字符，除了换行和行结束符。 |
| \w | 查找数字、字母及下划线。 |
| \W | 查找非单词字符。 |
| \d | 查找数字。 |
| \D | 查找非数字字符。 |
| \s | 查找空白字符。 |
| \S | 查找非空白字符。 |
| \b | 匹配单词边界。 |
| \B | 匹配非单词边界。 |
| \0 | 查找 NULL 字符。 |
| \n | 查找换行符。 |
| \f | 查找换页符。 |
| \r | 查找回车符。 |
| \t | 查找制表符。 |
| \v | 查找垂直制表符。 |
| \xxx | 查找以八进制数 xxx 规定的字符。 |
| \xdd | 查找以十六进制数 dd 规定的字符。 |
| \uxxxx | 查找以十六进制数 xxxx 规定的 Unicode 字符。 |

## 量词
| 量词 | 描述 |
|-|-|
| n+ | 匹配任何包含至少一个 n 的字符串。例如，/a+/ 匹配 "candy" 中的 "a"，"caaaaaaandy" 中所有的 "a"。 |
| n* | 匹配任何包含零个或多个 n 的字符串。例如，/bo*/ 匹配 "A ghost booooed" 中的 "boooo"，"A bird warbled" 中的 "b"，但是不匹配 "A goat grunted"。 |
| n? | 匹配任何包含零个或一个 n 的字符串。例如，/e?le?/ 匹配 "angel" 中的 "el"，"angle" 中的 "le"。 |
| n{X} | 匹配包含 X 个 n 的序列的字符串。例如，/a{2}/ 不匹配 "candy," 中的 "a"，但是匹配 "caandy," 中的两个 "a"，且匹配 "caaandy." 中的前两个 "a"。 |
| n{X,} | X 是一个正整数。前面的模式 n 连续出现至少 X 次时匹配。例如，/a{2,}/ 不匹配 "candy" 中的 "a"，但是匹配 "caandy" 和 "caaaaaaandy." 中所有的 "a"。 |
| n{X,Y} | X 和 Y 为正整数。前面的模式 n 连续出现至少 X 次，至多 Y 次时匹配。例如，/a{1,3}/ 不匹配 "cndy"，匹配 "candy," 中的 "a"，"caandy," 中的两个 "a"，匹配 "caaaaaaandy" 中的前面三个 "a"。注意，当匹配 "caaaaaaandy" 时，即使原始字符串拥有更多的 "a"，匹配项也是 "aaa"。 |
| n$ | 匹配任何结尾为 n 的字符串。 |
| ^n | 匹配任何开头为 n 的字符串。 |
| ?=n | 匹配任何其后紧接指定字符串 n 的字符串。 |
| ?!n | 匹配任何其后没有紧接指定字符串 n 的字符串。 |

## RegExp 对象方法
| 方法 | 描述 |
|-|-|
| compile | 在 1.5 版本中已废弃。 编译正则表达式。 |
| exec | 检索字符串中指定的值。返回找到的值，并确定其位置。 |
| test | 检索字符串中指定的值。返回 true 或 false。 |
| toString | 返回正则表达式的字符串。 |

## 支持正则表达式的 String 对象的方法
| 方法 | 描述 | FF | IE |
|-|-|-|-|
| search | 检索与正则表达式相匹配的值。 | 1 | 4 |
| match | 找到一个或多个正则表达式的匹配。 | 1 | 4 |
| replace | 替换与正则表达式匹配的子串。 | 1 | 4 |
| split | 把字符串分割为字符串数组。 | 1 | 4 |

## RegExp 对象属性
| 属性 | 描述 |
|-|-|
| constructor | 返回一个函数，该函数是一个创建 RegExp 对象的原型。 |
| global | 判断是否设置了 "g" 修饰符 |
| ignoreCase | 判断是否设置了 "i" 修饰符 |
| lastIndex | 用于规定下次匹配的起始位置 |
| multiline | 判断是否设置了 "m" 修饰符 |
| source | 返回正则表达式的匹配模式 |

------------------------------